# Heat Up - Telegram Session Warmup Service

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è "–ø—Ä–æ–≥—Ä–µ–≤–∞" –Ω–æ–≤—ã—Ö Telegram-–∞–∫–∫–∞—É–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–µ —Å –ø–æ–º–æ—â—å—é LLM.

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

Heat Up –ø–æ–ª—É—á–∞–µ—Ç ID —Å–µ—Å—Å–∏–∏ Telegram –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–µ—Ä–∏—é –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ 2-4 —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º –∫–∞–Ω–∞–ª–∞–º
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–∞–Ω–∞–ª–∞—Ö
- –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–∞—É–∑—ã –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏
- –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –∫–∞–∂–¥—ã–π —Ä–∞–∑ (—á–µ—Ä–µ–∑ LLM)

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Client    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ POST /warmup/{session_id}
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  FastAPI Server ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ          ‚îÇ
    ‚ñº          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  LLM   ‚îÇ ‚îÇ   Telegram   ‚îÇ
‚îÇ Agent  ‚îÇ ‚îÇ  API Client  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   Executor   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **LLM-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π**: GPT-4o-mini –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π
- **–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∫–∞–Ω–∞–ª–æ–≤**: 20+ –∫–∞–Ω–∞–ª–æ–≤ —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–Ω–æ–≤–æ—Å—Ç–∏, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è –∏ —Ç.–¥.)
- **–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏**: –°–ª—É—á–∞–π–Ω—ã–µ –ø–∞—É–∑—ã –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —á–µ–ª–æ–≤–µ–∫–∞
- **–î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã**:
  - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (`/warmup/{session_id}`) - –±—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ —Ñ–æ–Ω–µ
  - –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (`/warmup-sync/{session_id}`) - –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: Graceful handling —Å fallback-–ø–ª–∞–Ω–∞–º–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```env
OPENAI_API_KEY=sk-proj-your-key-here
TELEGRAM_API_BASE_URL=http://your-telegram-api:8000
TELEGRAM_API_KEY=optional-api-key
LOG_LEVEL=INFO
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
python main.py

# –ò–ª–∏ —á–µ—Ä–µ–∑ uvicorn
uvicorn main:app --host 0.0.0.0 --port 8080 --reload
```

## üì° API Endpoints

### `POST /warmup/{session_id}`

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ–≤ —Å–µ—Å—Å–∏–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–ª–∞–Ω –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤ —Ñ–æ–Ω–µ).

**Request:**
```bash
curl -X POST "http://localhost:8080/warmup/abc123xyz789"
```

**Response:**
```json
{
  "session_id": "abc123xyz789",
  "status": "started",
  "message": "Warmup initiated with 5 actions",
  "action_plan": [
    {
      "action": "join_channel",
      "channel_username": "@telegram",
      "reason": "Join official updates channel"
    },
    {
      "action": "read_messages",
      "channel_username": "@telegram",
      "duration_seconds": 8,
      "reason": "Browse recent posts"
    }
  ]
}
```

### `POST /warmup-sync/{session_id}`

–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ–≤ (–∂–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç).

**Request:**
```bash
curl -X POST "http://localhost:8080/warmup-sync/abc123xyz789"
```

**Response:**
```json
{
  "session_id": "abc123xyz789",
  "status": "completed",
  "message": "Warmup completed: 5/5 actions successful",
  "action_plan": [...],
  "execution_summary": {
    "session_id": "abc123xyz789",
    "total_actions": 5,
    "successful_actions": 5,
    "failed_actions": 0,
    "joined_channels": ["@telegram", "@durov"],
    "results": [...]
  }
}
```

### `GET /health`

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞.

```bash
curl http://localhost:8080/health
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ö–∞–Ω–∞–ª—ã (`config.py`)

–°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `CHANNEL_POOL`. –í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏:

```python
CHANNEL_POOL = [
    {"username": "@yourchannel", "description": "Your channel description"},
    # ...
]
```

### –¢–∞–π–º–∞—É—Ç—ã –∏ –∑–∞–¥–µ—Ä–∂–∫–∏

```python
ACTION_DELAYS = {
    "min_between_actions": 3,      # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏
    "max_between_actions": 10,     # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–∞—É–∑–∞
    "min_read_time": 5,            # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —á—Ç–µ–Ω–∏—è
    "max_read_time": 15,           # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —á—Ç–µ–Ω–∏—è
}
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
heat_up/
‚îú‚îÄ‚îÄ main.py              # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ telegram_client.py   # –ö–ª–∏–µ–Ω—Ç –¥–ª—è Telegram API
‚îú‚îÄ‚îÄ llm_agent.py         # LLM-–∞–≥–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π
‚îú‚îÄ‚îÄ executor.py          # –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ openapi.json         # OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è Telegram API
‚îî‚îÄ‚îÄ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üé≠ –¢–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π

1. **join_channel** - –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–∞–Ω–∞–ª—É
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `channel_username`
   
2. **read_messages** - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `channel_username`, `duration_seconds`
   
3. **idle** - –ü–∞—É–∑–∞/–æ—Ç–¥—ã—Ö
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `duration_seconds`

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ API-–∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.env` (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å!)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π
- Graceful error handling

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–µ—Ä–≤–∏—Å –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è:

```
2024-10-10 12:00:00 - INFO - Received warmup request for session: abc123xyz789
2024-10-10 12:00:01 - INFO - Generated 5 actions for session abc123xyz789
2024-10-10 12:00:02 - INFO - [1/5] Executing: join_channel - Join official channel
2024-10-10 12:00:05 - INFO - Successfully joined @telegram
...
```

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Python

```python
import httpx
import asyncio

async def warmup_session(session_id: str):
    async with httpx.AsyncClient() as client:
        response = await client.post(
            f"http://localhost:8080/warmup/{session_id}"
        )
        return response.json()

result = asyncio.run(warmup_session("abc123xyz789"))
print(result)
```

### cURL

```bash
# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º
curl -X POST http://localhost:8080/warmup/abc123xyz789

# –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º —Å –ø–æ–ª–Ω—ã–º –æ—Ç—á–µ—Ç–æ–º
curl -X POST http://localhost:8080/warmup-sync/abc123xyz789

# –° –∫–∞—Å—Ç–æ–º–Ω—ã–º Telegram API
curl -X POST http://localhost:8080/warmup/abc123xyz789 \
  -H "Content-Type: application/json" \
  -d '{
    "telegram_api_base_url": "http://custom-api:8000",
    "telegram_api_key": "your-key"
  }'
```

## üîÑ Workflow

1. **–ó–∞–ø—Ä–æ—Å** ‚Üí –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `session_id`
2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è** ‚Üí LLM —Å–æ–∑–¥–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π (3-7 —à–∞–≥–æ–≤)
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è** ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π
4. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** ‚Üí –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
5. **–û—Ç—á–µ—Ç** ‚Üí –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –¥–µ—Ç–∞–ª—è–º–∏ —É—Å–ø–µ—Ö–∞/–æ—à–∏–±–æ–∫

## üêõ Troubleshooting

### LLM –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `OPENAI_API_KEY` –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã API

### –û—à–∏–±–∫–∏ Telegram API
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_API_BASE_URL`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Å—Å–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∞–∫—Ç–∏–≤–Ω–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –î–µ–π—Å—Ç–≤–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `LOG_LEVEL=DEBUG`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–Ω–∞–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

## üìà –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ –ø–æ—Å—Ç—ã
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–≥—Ä–µ–≤–æ–≤
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- [ ] Batch processing –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Å—Å–∏–π
- [ ] –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## ü§ù –í–∫–ª–∞–¥

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è pull requests –∏ issue reports!


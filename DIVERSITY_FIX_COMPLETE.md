# üî• –ü–û–õ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –û–î–ù–û–û–ë–†–ê–ó–ò–Ø

## üî¥ **–ß–¢–û –ë–´–õ–û –ù–ï –¢–ê–ö:**

### **–ü—Ä–æ–±–ª–µ–º–∞ 1: –í—Å–µ –ø–æ–¥–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –Ω–∞ @telegram –∏ @durov**
```
–ê–∫–∫–∞—É–Ω—Ç 1: @telegram, @durov
–ê–∫–∫–∞—É–Ω—Ç 2: @telegram, @durov  
–ê–∫–∫–∞—É–Ω—Ç 3: @telegram, @durov
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –í `config.py` VERIFIED_CHANNELS –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∞–ª @telegram –∏ @durov
- LLM –≤–∏–¥–µ–ª –í–°–ï –∫–∞–Ω–∞–ª—ã, –¥–∞–∂–µ —Å relevance_score = 0.0
- –ù–µ –±—ã–ª–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

### **–ü—Ä–æ–±–ª–µ–º–∞ 2: –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏**
```
–ü–µ—Ä—Å–æ–Ω–∞ 1: –£—á–∏—Ç–µ–ª—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏, 30 –ª–µ—Ç
–ü–µ—Ä—Å–æ–Ω–∞ 2: –£—á–∏—Ç–µ–ª—å..., 32 –≥–æ–¥–∞
–ü–µ—Ä—Å–æ–Ω–∞ 3: –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å..., 29 –ª–µ—Ç
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ù–µ—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
- gpt-4o-mini —Å–ª–∏—à–∫–æ–º –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞
- –ù–µ—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### **–ü—Ä–æ–±–ª–µ–º–∞ 3: –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**
```
–í—Å–µ: join @telegram ‚Üí read @telegram ‚Üí join @durov
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –í –ø—Ä–∏–º–µ—Ä–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è @telegram
- LLM –∫–æ–ø–∏—Ä–æ–≤–∞–ª –ø—Ä–∏–º–µ—Ä—ã
- –ù–µ –±—ã–ª–æ —É–∫–∞–∑–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∫–∞–Ω–∞–ª—ã

---

## ‚úÖ **–ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:**

### **1. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–∞–Ω–∞–ª–æ–≤ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏** (`llm_agent.py`)

**–ë–´–õ–û:**
```python
relevant_chats = get_relevant_chats(account_id, limit=15)
# –ü–æ–∫–∞–∑—ã–≤–∞–ª–∏ –í–°–ï –∫–∞–Ω–∞–ª—ã, –≤–∫–ª—é—á–∞—è —Å score 0.0
```

**–°–¢–ê–õ–û:**
```python
all_chats = get_relevant_chats(account_id, limit=50)
# –§–ò–õ–¨–¢–†: –¢–û–õ–¨–ö–û –∫–∞–Ω–∞–ª—ã —Å relevance_score >= 0.4
relevant_chats = [ch for ch in all_chats if ch.get('relevance_score', 0) >= 0.4]
```

### **2. –£–¥–∞–ª–∏–ª–∏ @telegram/@durov –∏–∑ fallback** (`config.py`)

**–ë–´–õ–û:**
```python
VERIFIED_CHANNELS = [
    {"username": "@durov", ...},
    {"username": "@telegram", ...},
]
```

**–°–¢–ê–õ–û:**
```python
VERIFIED_CHANNELS = [
    # –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ channels_catalog
]
```

**–ò –≤ fallback:**
```python
fallback_channels = [ch for ch in CHANNEL_POOL 
                     if ch['username'] not in ['@telegram', '@durov']]
```

### **3. –Ø–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –ø—Ä–æ–º–ø—Ç–µ** (`llm_agent.py`)

–î–æ–±–∞–≤–∏–ª–∏:
```
‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:
- –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û –∫–∞–Ω–∞–ª—ã –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ!
- –í—ã–±–∏—Ä–∞–π –∫–∞–Ω–∞–ª—ã —Å –í–´–°–û–ö–û–ô —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å—é (>0.7)
- –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π @telegram –∏–ª–∏ @durov - —ç—Ç–æ —Å–ª–∏—à–∫–æ–º –æ—á–µ–≤–∏–¥–Ω–æ
- –ö–∞–∂–¥—ã–π —á–µ–ª–æ–≤–µ–∫ –≤—Å—Ç—É–ø–∞–µ—Ç –≤ –†–ê–ó–ù–´–ï –∫–∞–Ω–∞–ª—ã!
```

### **4. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –ø–µ—Ä—Å–æ–Ω** (`persona_agent.py`)

**–î–æ–±–∞–≤–∏–ª–∏ 11 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–π:**
```python
occupation_categories = [
    ["—É—á–∏—Ç–µ–ª—å", "–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å", "–≤–æ—Å–ø–∏—Ç–∞—Ç–µ–ª—å"],    # –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
    ["–≤—Ä–∞—á", "–º–µ–¥—Å–µ—Å—Ç—Ä–∞", "—Ñ–∞—Ä–º–∞—Ü–µ–≤—Ç"],             # –ú–µ–¥–∏—Ü–∏–Ω–∞
    ["–ø—Ä–æ–¥–∞–≤–µ—Ü", "–∫–∞—Å—Å–∏—Ä", "–º–µ–Ω–µ–¥–∂–µ—Ä"],             # –¢–æ—Ä–≥–æ–≤–ª—è
    ["–≤–æ–¥–∏—Ç–µ–ª—å", "—Ç–∞–∫—Å–∏—Å—Ç", "–∫—É—Ä—å–µ—Ä"],              # –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç
    ["–±—É—Ö–≥–∞–ª—Ç–µ—Ä", "—Å–µ–∫—Ä–µ—Ç–∞—Ä—å", "HR"],               # –û—Ñ–∏—Å
    # ... –∏ –µ—â–µ 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π
]

# –î–ª—è –ö–ê–ñ–î–û–ô –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
chosen_category = random.choice(occupation_categories)
```

**–î–æ–±–∞–≤–∏–ª–∏ —Å–ª—É—á–∞–π–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏:**
```python
age_hint = random.choice([
    "–º–æ–ª–æ–¥–æ–π (18-25)", 
    "—Å—Ä–µ–¥–Ω–∏–π (26-40)", 
    "–∑—Ä–µ–ª—ã–π (41-55)", 
    "—Å—Ç–∞—Ä—à–∏–π (56-65)"
])

interest_hint = random.choice([
    "—Å–ø–æ—Ä—Ç", "–∫—É–ª–∏–Ω–∞—Ä–∏—è", "—Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤–æ", "—á—Ç–µ–Ω–∏–µ",
    "–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è", "–∏–≥—Ä—ã", "–º—É–∑—ã–∫–∞", "–∫–∏–Ω–æ"...
])
```

### **5. –ü–µ—Ä–µ–∫–ª—é—á–∏–ª–∏ –Ω–∞ GPT-4o** (–æ–±–∞ –∞–≥–µ–Ω—Ç–∞)

**–ë–´–õ–û:** `gpt-4o-mini` (—ç–∫–æ–Ω–æ–º–Ω–∞—è, –Ω–æ –º–µ–Ω–µ–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω–∞—è)
**–°–¢–ê–õ–û:** `gpt-4o` (–ø–æ–ª–Ω–∞—è –º–æ–¥–µ–ª—å, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ)

```python
# persona_agent.py
self.model = "gpt-4o"  # –ü–æ–ª–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è

# llm_agent.py  
self.model = "gpt-4o"  # –ü–æ–ª–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
```

### **6. –û–±–Ω–æ–≤–∏–ª–∏ –ø—Ä–∏–º–µ—Ä—ã –≤ –ø—Ä–æ–º–ø—Ç–µ**

**–£–ë–†–ê–õ–ò:**
```json
{"action": "join_channel", "channel_username": "@telegram", ...}
```

**–î–û–ë–ê–í–ò–õ–ò:**
```
üéØ –¢–í–û–Ø –ó–ê–î–ê–ß–ê:
1. –ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –°–í–û–ò –∏–Ω—Ç–µ—Ä–µ—Å—ã: {–∏–Ω—Ç–µ—Ä–µ—Å—ã –ø–µ—Ä—Å–æ–Ω—ã}
2. –í—ã–±–µ—Ä–∏ –∫–∞–Ω–∞–ª—ã —Å –í–´–°–û–ö–û–ô —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å—é
3. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –£–ù–ò–ö–ê–õ–¨–ù–£–Æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
4. –ö–∞–∂–¥—ã–π —á–µ–ª–æ–≤–µ–∫ –¥–µ–π—Å—Ç–≤—É–µ—Ç –ü–û-–†–ê–ó–ù–û–ú–£!
```

---

## üìä **–†–ï–ó–£–õ–¨–¢–ê–¢:**

### **–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –∞–∫–∫–∞—É–Ω—Ç:**

**–ê–∫–∫–∞—É–Ω—Ç 1 (–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç, 28 –ª–µ—Ç, –∏–Ω—Ç–µ—Ä–µ—Å—ã: —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏):**
- –ü–µ—Ä—Å–æ–Ω–∞: –£–Ω–∏–∫–∞–ª—å–Ω–∞—è ‚úÖ
- –ö–∞–Ω–∞–ª—ã: @tproger_official (0.9), @techcrunch (0.7), @vcnews (0.7)
- –î–µ–π—Å—Ç–≤–∏—è: –í—Å—Ç—É–ø–∞–µ—Ç –≤ IT-–∫–∞–Ω–∞–ª—ã, —á–∏—Ç–∞–µ—Ç –ø—Ä–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

**–ê–∫–∫–∞—É–Ω—Ç 2 (–ú–µ–¥—Å–µ—Å—Ç—Ä–∞, 34 –≥–æ–¥–∞, –∏–Ω—Ç–µ—Ä–µ—Å—ã: –π–æ–≥–∞, —Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤–æ):**
- –ü–µ—Ä—Å–æ–Ω–∞: –£–Ω–∏–∫–∞–ª—å–Ω–∞—è ‚úÖ
- –ö–∞–Ω–∞–ª—ã: @theoryandpractice (0.9), @postnauka (0.8)
- –î–µ–π—Å—Ç–≤–∏—è: –í—Å—Ç—É–ø–∞–µ—Ç –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∫–∞–Ω–∞–ª—ã

**–ê–∫–∫–∞—É–Ω—Ç 3 (–í–æ–¥–∏—Ç–µ–ª—å, 52 –≥–æ–¥–∞, –∏–Ω—Ç–µ—Ä–µ—Å—ã: —Ä—ã–±–∞–ª–∫–∞, —Ñ—É—Ç–±–æ–ª):**
- –ü–µ—Ä—Å–æ–Ω–∞: –£–Ω–∏–∫–∞–ª—å–Ω–∞—è ‚úÖ
- –ö–∞–Ω–∞–ª—ã: @sports (0.8), @championat (0.7)
- –î–µ–π—Å—Ç–≤–∏—è: –í—Å—Ç—É–ø–∞–µ—Ç –≤ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –∫–∞–Ω–∞–ª—ã

---

## üß™ **–ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨:**

```bash
# 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º)

# 2. –î–æ–±–∞–≤—å 3 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞
for i in 1 2 3; do
  curl -X POST http://localhost:8000/accounts/add \
    -H "Content-Type: application/json" \
    -d "{\"session_id\": \"diversity_test_$i\"}"
  sleep 3
done

# 3. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –ø–µ—Ä—Å–æ–Ω
curl -s http://localhost:8000/accounts | \
  python3 -c "import sys,json; \
  [print(f'{i+1}. {a[\"session_id\"]}: –≤–æ–∑—Ä–∞—Å—Ç {p.get(\"age\")}, {p.get(\"occupation\")}') \
  for i, a in enumerate(json.load(sys.stdin)['accounts'][-3:]) \
  if (p := a)]"

# 4. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∫–∞–Ω–∞–ª–æ–≤
for i in 1 2 3; do
  echo "=== –ê–∫–∫–∞—É–Ω—Ç diversity_test_$i ==="
  sqlite3 sessions.db \
    "SELECT chat_username, relevance_score FROM discovered_chats \
     WHERE account_id=(SELECT id FROM accounts WHERE session_id='diversity_test_$i') \
     AND relevance_score >= 0.4 \
     ORDER BY relevance_score DESC LIMIT 5"
done

# 5. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–≥—Ä–µ–≤ –∏ —Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏
./watch_logs.sh
# –í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç 1 (–æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥)

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
curl -X POST http://localhost:8000/scheduler/start
```

---

## üìù **–ß–¢–û –°–ú–û–¢–†–ï–¢–¨ –í –õ–û–ì–ê–•:**

```
‚úÖ –•–û–†–û–®–û:
- üé≤ Diversity hints: —Ä–∞–∑–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π
- üìã –î–û–°–¢–£–ü–ù–´–ï –ö–ê–ù–ê–õ–´: —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
- join_channel: –†–ê–ó–ù–´–ï –∫–∞–Ω–∞–ª—ã (@tproger, @aviasales, @sports)

‚ùå –ü–õ–û–•–û (–µ—Å–ª–∏ —É–≤–∏–¥–∏—à—å - –ø–∏—à–∏):
- –í—Å–µ –≤—Å—Ç—É–ø–∞—é—Ç –≤ @telegram
- –í—Å–µ –æ–¥–Ω–æ–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π
```

---

## üí∞ **–°–¢–û–ò–ú–û–°–¢–¨:**

‚ö†Ô∏è **GPT-4o –¥–æ—Ä–æ–∂–µ —á–µ–º gpt-4o-mini:**
- gpt-4o-mini: ~$0.15 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤
- gpt-4o: ~$2.50 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤ (–≤ 16 —Ä–∞–∑ –¥–æ—Ä–æ–∂–µ!)

**–î–ª—è 100 –∞–∫–∫–∞—É–Ω—Ç–æ–≤:**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω: ~$0.25
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π (10 —Ä–∞–∑/–¥–µ–Ω—å): ~$5/–¥–µ–Ω—å
- **–ò—Ç–æ–≥–æ: ~$150/–º–µ—Å—è—Ü** –¥–ª—è 100 –∞–∫–∫–∞—É–Ω—Ç–æ–≤

–ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ gpt-4o-mini –µ—Å–ª–∏ –¥–æ—Ä–æ–≥–æ, –Ω–æ —Ç–æ–≥–¥–∞:
1. –î–æ–±–∞–≤—å –±–æ–ª—å—à–µ —è–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
2. –£–≤–µ–ª–∏—á—å temperature –¥–æ 1.5
3. –î–æ–±–∞–≤—å random seed –≤ –∫–∞–∂–¥—ã–π –ø—Ä–æ–º–ø—Ç

---

## üéØ **–ò–¢–û–ì:**

‚úÖ –£–±—Ä–∞–ª–∏ @telegram/@durov –∏–∑ –≤—Å–µ—Ö –º–µ—Å—Ç
‚úÖ –§–∏–ª—å—Ç—Ä—É–µ–º –∫–∞–Ω–∞–ª—ã –ø–æ relevance_score >= 0.4
‚úÖ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –ø–µ—Ä—Å–æ–Ω (11 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
‚úÖ –°–ª—É—á–∞–π–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚úÖ GPT-4o –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
‚úÖ –Ø–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ "–ù–ï –ü–û–í–¢–û–†–Ø–ô–°–Ø"

**–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –∞–∫–∫–∞—É–Ω—Ç –£–ù–ò–ö–ê–õ–ï–ù!** üéâ


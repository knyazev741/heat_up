# Admin API Integration - Quick Start

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ —Å–µ—Å—Å–∏–π –∏–∑ Admin API

```bash
cd /root/heat_up
python3 sync_session_statuses.py
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
- –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ (frozen) —Å–µ—Å—Å–∏–∏ –∏–∑ Admin API
- –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —É–¥–∞–ª–µ–Ω–Ω—ã–µ (deleted) —Å–µ—Å—Å–∏–∏ –∏–∑ Admin API
- –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∑–∞–±–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞–≤—Å–µ–≥–¥–∞ (spamblock –±–µ–∑ unban_date) —Å–µ—Å—Å–∏–∏
- –û–±–Ω–æ–≤–ª—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î heat_up

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π

```bash
python3 scripts/warmup_exclusion_report.py
```

–ü–æ–∫–∞–∂–µ—Ç:
- –°–∫–æ–ª—å–∫–æ —Å–µ—Å—Å–∏–π –∏—Å–∫–ª—é—á–µ–Ω–æ –∏–∑ –ø—Ä–æ–≥—Ä–µ–≤–∞
- –ü–æ –∫–∞–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º
- –≠–∫–æ–Ω–æ–º–∏—é —Ç–æ–∫–µ–Ω–æ–≤ LLM

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Admin API

```bash
python3 test_admin_api.py
```

## üìä –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–ü–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≥—Ä–µ–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –ò—Å–∫–ª—é—á–∞–µ—Ç –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ (frozen) —Å–µ—Å—Å–∏–∏
- ‚úÖ –ò—Å–∫–ª—é—á–∞–µ—Ç —É–¥–∞–ª–µ–Ω–Ω—ã–µ (deleted) —Å–µ—Å—Å–∏–∏  
- ‚úÖ –ò—Å–∫–ª—é—á–∞–µ—Ç –∑–∞–±–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞–≤—Å–µ–≥–¥–∞ —Å–µ—Å—Å–∏–∏
- ‚úÖ –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≥—Ä–µ—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–±–∞–Ω–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ (—Å unban_date)

## üîë –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í `.env`:
```bash
ADMIN_API_BASE_URL=https://adminapi.knyazservice.com
TELEGRAM_API_KEY=your_api_key_here
```

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**Admin API (–≤—Å–µ–≥–æ –≤ —Å–∏—Å—Ç–µ–º–µ Knyaz):**
- Frozen: 436 —Å–µ—Å—Å–∏–π
- Deleted: 14,588 —Å–µ—Å—Å–∏–π
- Banned forever: 348 —Å–µ—Å—Å–∏–π

**–õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î Heat_Up (–∏–∑ 63 —Å–µ—Å—Å–∏–π):**
- –ò—Å–∫–ª—é—á–µ–Ω–æ: 28 —Å–µ—Å—Å–∏–π (44.4%)
  - Frozen: 20
  - Deleted: 8
- –ì—Ä–µ–µ—Ç—Å—è: 35 —Å–µ—Å—Å–∏–π (55.6%)

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑ –≤ –¥–µ–Ω—å):
   ```bash
   # –î–æ–±–∞–≤–∏—Ç—å –≤ crontab:
   0 2 * * * cd /root/heat_up && python3 sync_session_statuses.py >> /var/log/admin_sync.log 2>&1
   ```

2. **–ü–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å**:
   ```bash
   pkill -f "python.*main.py"
   nohup python3 main.py > /dev/null 2>&1 &
   ```

3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ—Ç—á–µ—Ç—ã** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Admin API
```
Error: Connection refused
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `ADMIN_API_BASE_URL` –≤ `.env`

### –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```
Error: 401 Unauthorized
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_API_KEY` –≤ `.env`

### –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö
```
Synced 436 but local DB has 20
```
**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ:** –í –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î —Ç–æ–ª—å–∫–æ —Å–µ—Å—Å–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –≥—Ä–µ–µ–º. –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –≤ Admin API.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç: `ADMIN_API_INTEGRATION_REPORT.md`
- –ö–ª–∏–µ–Ω—Ç API: `admin_api_client.py`
- –°–∫—Ä–∏–ø—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: `sync_session_statuses.py`


# ‚úÖ Sponsored Ads - –ì–û–¢–û–í–û!

## üéØ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```python
messages.GetSponsoredMessages(peer=InputPeerChannel(...))  # ‚ùå
```

**–°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```python
channels.GetSponsoredMessages(channel=InputPeerChannel(...))  # ‚úÖ
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç #1: @SecretAdTestChannel
```
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ 2 —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è
  - Quiz Bot: https://t.me/QuizBot?start=GreatMinds
  - Pavel Durov: https://t.me/durov/172
‚úÖ Posts between ads: 10
‚úÖ ALL TESTS PASSED
```

### –¢–µ—Å—Ç #2: @durov
```
‚úÖ –†–µ–∫–ª–∞–º–∞ –ø–æ–ª—É—á–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
‚úÖ ALL TESTS PASSED
```

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### 1. `telegram_tl_helpers.py`
```python
def make_get_sponsored_messages_query(channel: InputPeerChannel) -> str:
    return f"pylogram.raw.functions.channels.GetSponsoredMessages(channel={repr(channel)})"
```

### 2. `executor.py` - –¥–æ–±–∞–≤–ª–µ–Ω –∑–∞–ø—Ä–æ—Å —Ä–µ–∫–ª–∞–º—ã –≤ `_join_channel()`
- –ü–ï–†–ï–î –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ–º –≤ –∫–∞–Ω–∞–ª –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–µ–º–∏—É–º —Å—Ç–∞—Ç—É—Å
- –î–ª—è –Ω–µ-–ø—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —Ä–µ–∫–ª–∞–º–∞
- –†–µ–∫–ª–∞–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∏ –æ—Ç–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ viewed
- –¢–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç join

### 3. `executor.py` - `_read_messages()` —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª, –Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–ª–æ—Å—å

## üìÅ –§–∞–π–ª—ã

- ‚úÖ `telegram_tl_helpers.py` - –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ `telegram_client.py` - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ `executor.py` - –¥–æ–±–∞–≤–ª–µ–Ω –∑–∞–ø—Ä–æ—Å –≤ _join_channel
- ‚úÖ `tests/test_sponsored_ads.py` - —Å–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
- ‚úÖ `docs/guides/SPONSORED_ADS_FINAL_REPORT.md` - –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
# –¢–µ—Å—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –∫–∞–Ω–∞–ª–µ
python3 tests/test_sponsored_ads.py 27031 @SecretAdTestChannel

# –¢–µ—Å—Ç –Ω–∞ –ª—é–±–æ–º –¥—Ä—É–≥–æ–º –∫–∞–Ω–∞–ª–µ
python3 tests/test_sponsored_ads.py 27031 @durov

# –ß–µ—Ä–µ–∑ warmup (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
curl -X POST http://localhost:8080/warmup/27031
```

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**ViewSponsoredMessage –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500**
- –†–µ–∫–ª–∞–º–∞ **–ø–æ–ª—É—á–∞–µ—Ç—Å—è** –∏ **–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ
- –ù–æ –æ—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–æ–±–ª–µ–º–∞ —Å–µ—Ä–≤–µ—Ä–∞) ‚ö†Ô∏è
- –ö–æ–¥ gracefully –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É ‚úÖ

## üìã Checklist

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `channels.GetSponsoredMessages` (–ù–ï messages)
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `channel=` (–ù–ï peer)
- ‚úÖ –ó–∞–ø—Ä–æ—Å –≤ `_join_channel` –¥–æ–±–∞–≤–ª–µ–Ω
- ‚úÖ –ó–∞–ø—Ä–æ—Å –≤ `_read_messages` —Ä–∞–±–æ—Ç–∞–ª –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–º–∏—É–º —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∫–ª–∞–º—ã
- ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã –Ω–∞ 2 –∫–∞–Ω–∞–ª–∞—Ö
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéâ –°—Ç–∞—Ç—É—Å: PRODUCTION READY

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** 20.10.2025, 05:33 UTC  
**–°–µ—Å—Å–∏—è:** 27031  
**–ö–∞–Ω–∞–ª—ã:** @SecretAdTestChannel, @durov  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ ‚úÖ


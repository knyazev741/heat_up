# –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –§–∞–∑—ã 1.3: –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –≥—Ä—É–ø–ø—ã –±–æ—Ç–æ–≤

**–î–∞—Ç–∞:** 2026-01-08
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ

## –û–±–∑–æ—Ä

–§–∞–∑–∞ 1.3 —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–≥—Ä–µ–≤–∞ Telegram-–∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞. –°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ—Ç–∞–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –≥—Ä—É–ø–ø—ã –∏ –≤–µ—Å—Ç–∏ –≥—Ä—É–ø–ø–æ–≤—ã–µ –¥–∏–∞–ª–æ–≥–∏.

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASSED

- Starter —Å–æ–æ–±—â–µ–Ω–∏–µ: "–°–ª—É—à–∞–π—Ç–µ, –∞ –∫—Ç–æ-–Ω–∏–±—É–¥—å —Å–º–æ—Ç—Ä–µ–ª –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω ¬´–ú–∞–Ω–¥–∞–ª–æ—Ä—Ü–∞¬ª? –Ø –≤—á–µ—Ä–∞ –¥–æ—Å–º–æ—Ç—Ä–µ–ª, –µ—Å—Ç—å –æ —á–µ–º –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å"
- Response —Å–æ–æ–±—â–µ–Ω–∏–µ: "–Ø —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª —Å–º–æ—Ç—Ä–µ—Ç—å, –Ω–µ —Å–ø–æ–π–ª–µ—Ä–∏—Ç–µ! üòÑ –ö—Ç–æ-–Ω–∏–±—É–¥—å —É–∂–µ –∑–∞–º–µ—Ç–∏–ª –æ—Ç—Å—ã–ª–∫–∏ –∫ —Å—Ç–∞—Ä–æ–º—É —Å–µ–∑–æ–Ω—É?"

### –¢–µ—Å—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø –≤ Telegram
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASSED

### –¢–µ—Å—Ç 3: –ì—Ä—É–ø–ø–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASSED

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏

### –ü—Ä–æ–≥—Ä–µ–≤–∞–µ–º—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã (warmup)

| Session ID | –ò–º—è | –°—Ç–∞–¥–∏—è | –†–æ–ª—å –≤ —Ç–µ—Å—Ç–∞—Ö |
|------------|-----|--------|---------------|
| **27060** | –ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞ | 14 | –°–æ–∑–¥–∞—Ç–µ–ª—å –æ–±–µ–∏—Ö –≥—Ä—É–ø–ø (admin), –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ 1 —Å–æ–æ–±—â–µ–Ω–∏–µ |
| **27065** | –ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞ | 14 | –£—á–∞—Å—Ç–Ω–∏–∫ (member), –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ 2 —Å–æ–æ–±—â–µ–Ω–∏—è |
| **27133** | –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –í–æ–ª–∫–æ–≤ | 14 | –£—á–∞—Å—Ç–Ω–∏–∫ (member), 0 —Å–æ–æ–±—â–µ–Ω–∏–π |

### –í–µ—á–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã (helper)

*–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –≤ –¥–∞–Ω–Ω–æ–º —Ç–µ—Å—Ç–µ.*

### –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ (status=1)

| Session ID | –ò–º—è | –ü—Ä–∏—á–∏–Ω–∞ |
|------------|-----|---------|
| **26881** | –ê–Ω–¥—Ä–µ–π –°–æ–∫–æ–ª–æ–≤ | status=1 –≤ Admin API ‚Äî –∑–∞–ø—Ä–µ—â–µ–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –≥—Ä—É–ø–ø—É |

---

## –°–æ–∑–¥–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã

### –ì—Ä—É–ø–ø–∞ #1: "–¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç üéâ"

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| Telegram chat_id | 5111704750 |
| Invite link | https://t.me/+YO-BkFKOgOsyN2Fi |
| –°—Ç–∞—Ç—É—Å | archived (–ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞) |
| –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ | 3 |
| –°–æ–æ–±—â–µ–Ω–∏–π | 1 |

**–£—á–∞—Å—Ç–Ω–∏–∫–∏:**
- Session 27060 (–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞) ‚Äî admin
- Session 27065 (–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞) ‚Äî member
- Session 27133 (–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –í–æ–ª–∫–æ–≤) ‚Äî member

**–°–æ–æ–±—â–µ–Ω–∏—è:**
1. –ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞: "–ö–æ–ª–ª–µ–≥–∏, –∞ —É –∫–æ–≥–æ-–Ω–∏–±—É–¥—å –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç –æ—Å–µ–Ω–Ω–µ–≥–æ —Å—É–ø–∞? –•–æ—á—É –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–µ–Ω—å–∫–æ–µ"

---

### –ì—Ä—É–ø–ø–∞ #2: "–¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç"

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| Telegram chat_id | 5100532810 |
| Invite link | https://t.me/+t_UJWr3jLNVkZWVi |
| –°—Ç–∞—Ç—É—Å | archived (–ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞) |
| –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ | 3 |
| –°–æ–æ–±—â–µ–Ω–∏–π | 2 |

**–£—á–∞—Å—Ç–Ω–∏–∫–∏:**
- Session 27060 (–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞) ‚Äî admin
- Session 27065 (–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞) ‚Äî member
- Session 27133 (–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –í–æ–ª–∫–æ–≤) ‚Äî member

**–°–æ–æ–±—â–µ–Ω–∏—è:**
1. –ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞ (27065): "–¢–æ–ª—å–∫–æ —á—Ç–æ –≤–µ—Ä–Ω—É–ª–∞—Å—å —Å –ø—Ä–æ–≥—É–ª–∫–∏ –ø–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–º—É —Ü–µ–Ω—Ç—Ä—É ‚Äî –Ω–∞—à–ª–∞ —Å—Ç–∞—Ä–∏–Ω–Ω—É—é –∫–æ—Ñ–µ–π–Ω—é..."
2. –ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞ (27060): "–ö—Å—Ç–∞—Ç–∏, –Ω–∞ –¥–Ω—è—Ö —Ö–æ–¥–∏–ª–∞ –≤ –ø–æ—Ö–æ–¥ –∫ –æ–∑–µ—Ä—É ‚Äî —Å–¥–µ–ª–∞–ª–∞ –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–µ –∫–∞–¥—Ä—ã —Ä–∞—Å—Å–≤–µ—Ç–∞..."

---

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (`database.py`)

–î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–±–ª–∏—Ü—ã:
- `bot_groups` ‚Äî –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø
- `bot_group_members` ‚Äî —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä—É–ø–ø
- `bot_group_messages` ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

–î–æ–±–∞–≤–ª–µ–Ω—ã CRUD —Ñ—É–Ω–∫—Ü–∏–∏ (13 —à—Ç.):
- `create_bot_group()`, `get_bot_group()`, `get_active_bot_groups()`
- `get_bot_groups_needing_activity()`, `update_bot_group()`
- `add_group_member()`, `get_group_members()`, `update_group_member()`
- `save_group_message()`, `get_group_messages()`, `get_last_group_message()`
- `count_active_bot_groups()`, `get_accounts_without_group_membership()`

### 2. GroupEngine (`group_engine.py`)

- `create_new_group()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
- `add_members_to_group()` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- `process_group_activities()` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `initiate_new_group_activities()` ‚Äî –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø
- `_choose_message_sender()` ‚Äî –≤—ã–±–æ—Ä –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è —Å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–æ–π

### 3. TL-—Ö–µ–ª–ø–µ—Ä—ã (`telegram_tl_helpers.py`)

- `make_create_chat_query()` ‚Äî messages.CreateChat
- `make_export_chat_invite_query()` ‚Äî messages.ExportChatInvite
- `make_add_chat_user_query()` ‚Äî messages.AddChatUser

### 4. TelegramClient (`telegram_client.py`)

- `create_group()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
- `export_chat_invite()` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç invite-—Å—Å—ã–ª–∫–∏
- `add_user_to_chat()` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `send_message_to_group()` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ raw TL

### 5. ConversationAgent (`conversation_agent.py`)

- `generate_group_message()` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è starter –∏ response —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤ –≥—Ä—É–ø–ø: friends, thematic, work

### 6. Scheduler (`scheduler.py`)

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è GroupEngine –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
- `_process_groups()` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- 10% —à–∞–Ω—Å —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –≥—Ä—É–ø–ø –∑–∞ —Ü–∏–∫–ª

---

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ CreateChat** ‚Äî API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç chats –≤–Ω—É—Ç—Ä–∏ `updates`, –Ω–µ –Ω–∞–ø—Ä—è–º—É—é
2. **PHONE_NOT_OCCUPIED** ‚Äî –¥–ª—è –≥—Ä—É–ø–ø –Ω—É–∂–µ–Ω raw TL (InputPeerChat), –Ω–µ send_message API

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –°–µ—Å—Å–∏–∏ —Å `status=1` –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –≥—Ä—É–ø–ø—ã
2. –ú–∏–Ω–∏–º—É–º 3 —É—á–∞—Å—Ç–Ω–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã
3. –ú–∞–∫—Å–∏–º—É–º 10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –Ω–∞ –≥—Ä—É–ø–ø—É
4. –ì—Ä—É–ø–ø—ã –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è –ø–æ—Å–ª–µ 200 —Å–æ–æ–±—â–µ–Ω–∏–π –∏–ª–∏ 14 –¥–Ω–µ–π

---

## –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

- `tests/test_group_chat.py` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç

---

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –ì—Ä—É–ø–ø —Å–æ–∑–¥–∞–Ω–æ | 2 |
| –°–æ–æ–±—â–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ | 3 |
| –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ | 3 |
| –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π | 1 |
| –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | ~20 —Å–µ–∫—É–Ω–¥ |

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –§–∞–∑–∞ 1.3 –∑–∞–≤–µ—Ä—à–µ–Ω–∞
2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ production
3. –ü–µ—Ä–µ—Ö–æ–¥ –∫ –§–∞–∑–µ 2: –†–µ–∞–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã

# üîç –†–ï–ê–õ–¨–ù–´–ô SearchAgent —Å –≤–µ–±-–ø–æ–∏—Å–∫–æ–º

## ‚ùå **–ß–¢–û –ë–´–õ–û –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**

–Ø —Ç—É–ø–∞–Ω—É–ª –∏ —Å–æ–∑–¥–∞–ª **–∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏**:
- `channels_catalog.py` - —Å–ø–∏—Å–æ–∫ —Ñ–µ–π–∫–æ–≤—ã—Ö @username
- `groups_catalog.py` - —Å–ø–∏—Å–æ–∫ —Ñ–µ–π–∫–æ–≤—ã—Ö –≥—Ä—É–ø–ø

**–≠—Ç–æ –ë–†–ï–î!** SearchAgent –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å **–†–ï–ê–õ–¨–ù–´–ô –ü–û–ò–°–ö**!

---

## ‚úÖ **–ß–¢–û –°–î–ï–õ–ê–ù–û –ü–†–ê–í–ò–õ–¨–ù–û:**

### **1. –£–¥–∞–ª–∏–ª –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏**
```bash
‚ùå channels_catalog.py - –£–î–ê–õ–ï–ù
‚ùå groups_catalog.py - –£–î–ê–õ–ï–ù
```

### **2. –ü–µ—Ä–µ–ø–∏—Å–∞–ª search_agent.py**

–¢–µ–ø–µ—Ä—å –¥–µ–ª–∞–µ—Ç **–ù–ê–°–¢–û–Ø–©–ò–ô –≤–µ–±-–ø–æ–∏—Å–∫**:

```python
from duckduckgo_search import DDGS

# 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
queries = [
    "telegram –≥—Ä—É–ø–ø–∞ —á–∞—Ç –ú–æ—Å–∫–≤–∞",
    "telegram –≥—Ä—É–ø–ø–∞ —Ä—ã–±–∞–ª–∫–∞",
    "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç telegram —Å–æ–æ–±—â–µ—Å—Ç–≤–æ"
]

# 2. –ò—â–µ—Ç –≤ DuckDuckGo
results = ddgs.text(query, max_results=10)

# 3. –ò–∑–≤–ª–µ–∫–∞–µ—Ç Telegram-—Å—Å—ã–ª–∫–∏
# t.me/moscowchat
# t.me/fishing_ru
# @python_devs

# 4. LLM —Ä–∞–Ω–∂–∏—Ä—É–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —á–∞—Ç—ã
```

---

## üîç **–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢:**

### **–®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**
–ù–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä—Å–æ–Ω—ã:
```python
–ü–µ—Ä—Å–æ–Ω–∞: –†—ã–±–∞–∫ –∏–∑ –°–∞—Ä–∞—Ç–æ–≤–∞, 52 –≥–æ–¥–∞
–ò–Ω—Ç–µ—Ä–µ—Å—ã: —Ä—ã–±–∞–ª–∫–∞, —Ñ—É—Ç–±–æ–ª, –Ω–æ–≤–æ—Å—Ç–∏

–ó–∞–ø—Ä–æ—Å—ã:
- "telegram –≥—Ä—É–ø–ø–∞ —á–∞—Ç –°–∞—Ä–∞—Ç–æ–≤"
- "–°–∞—Ä–∞—Ç–æ–≤ telegram –≥—Ä—É–ø–ø–∞"
- "telegram –≥—Ä—É–ø–ø–∞ —Ä—ã–±–∞–ª–∫–∞"
- "—Ä—ã–±–∞–ª–∫–∞ telegram –∫–∞–Ω–∞–ª"
- "telegram —á–∞—Ç —Ñ—É—Ç–±–æ–ª —Ä–æ—Å—Å–∏—è"
```

### **–®–∞–≥ 2: –í–µ–±-–ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ DuckDuckGo**
```python
ddgs.text("telegram –≥—Ä—É–ø–ø–∞ —Ä—ã–±–∞–ª–∫–∞", max_results=10)

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- title: "–†—ã–±–∞–ª–∫–∞ –≤ –†–æ—Å—Å–∏–∏ | Telegram"
  url: "https://t.me/fishing_russia"
  
- title: "–ß–∞—Ç —Ä—ã–±–∞–∫–æ–≤ | Telegram –≥—Ä—É–ø–ø–∞"
  url: "https://t.me/fishermen_chat"
```

### **–®–∞–≥ 3: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ Telegram-—Å—Å—ã–ª–æ–∫**
–†–µ–≥—É–ª—è—Ä–∫–∏:
```python
r't\.me/([a-zA-Z0-9_]+)'       # t.me/username
r'telegram\.me/([a-zA-Z0-9_]+)' # telegram.me/username
r'@([a-zA-Z0-9_]+)'             # @username
```

–ù–∞—Ö–æ–¥–∏—Ç:
```python
[
  {"username": "@fishing_russia", "type": "channel"},
  {"username": "@fishermen_chat", "type": "group"},
  {"username": "@saratov_chat", "type": "group"}
]
```

### **–®–∞–≥ 4: LLM —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ**
```python
LLM –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π —á–∞—Ç:

@saratov_chat (group) ‚Üí score: 0.95 - "–ì—Ä—É–ø–ø–∞ –≥–æ—Ä–æ–¥–∞, –∏–¥–µ–∞–ª—å–Ω–æ"
@fishing_russia (channel) ‚Üí score: 0.85 - "–¢–µ–º–∞—Ç–∏–∫–∞ —Ä—ã–±–∞–ª–∫–∞, –æ—Ç–ª–∏—á–Ω–æ"
@fishermen_chat (group) ‚Üí score: 0.80 - "–ì—Ä—É–ø–ø–∞ —Ä—ã–±–∞–∫–æ–≤, –º–æ–∂–Ω–æ –æ–±—â–∞—Ç—å—Å—è"
```

---

## üìä **–ü–†–ò–ú–ï–† –†–ê–ë–û–¢–´:**

```python
–ü–µ—Ä—Å–æ–Ω–∞: –ê–ª–µ–∫—Å–µ–π, 28 –ª–µ—Ç, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –∏–∑ –ú–æ—Å–∫–≤—ã
–ò–Ω—Ç–µ—Ä–µ—Å—ã: –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è

–ó–∞–ø—Ä–æ—Å—ã:
1. "telegram –≥—Ä—É–ø–ø–∞ —á–∞—Ç –ú–æ—Å–∫–≤–∞"
2. "–ú–æ—Å–∫–≤–∞ telegram –≥—Ä—É–ø–ø–∞"
3. "telegram –≥—Ä—É–ø–ø–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"
4. "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ telegram –∫–∞–Ω–∞–ª"
5. "telegram —á–∞—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Ä–æ—Å—Å–∏—è"

–ù–∞–π–¥–µ–Ω–Ω—ã–µ —á–∞—Ç—ã (—á–µ—Ä–µ–∑ –†–ï–ê–õ–¨–ù–´–ô –ø–æ–∏—Å–∫):
- @moscowchat (group, score: 0.95) - "–ú–æ—Å–∫–≤–∞ | –û–±—â–∏–π —á–∞—Ç"
- @python_ru (group, score: 0.90) - "Python Developers Russia"
- @webdevrus (group, score: 0.85) - "–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏"
- @tproger_official (channel, score: 0.75) - "–¢–∏–ø–∏—á–Ω—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç"

–í–°–ï –≠–¢–û –†–ï–ê–õ–¨–ù–û –ù–ê–ô–î–ï–ù–û –ß–ï–†–ï–ó –ü–û–ò–°–ö!
```

---

## üõ†Ô∏è **–£–°–¢–ê–ù–û–í–ö–ê:**

```bash
pip install duckduckgo_search
```

–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `requirements.txt`

---

## ‚ö†Ô∏è **–í–ê–ñ–ù–û:**

### **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è DuckDuckGo:**
- –ù–µ—Ç rate limits (–±–µ—Å–ø–ª–∞—Ç–Ω–æ!)
- –ù–æ –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –Ω–µ –±–æ–ª–µ–µ 5 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ —Ä–∞–∑
- –î–µ–ª–∞—Ç—å –ø–∞—É–∑—ã –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

### **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
```python
# –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–æ—Ä–æ—Ç–∫–∏–µ username
if len(username) < 4:
    continue

# –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±—â–∏–µ —Å–ª–æ–≤–∞
if username in ['telegram', 'bot', 'channel', 'group']:
    continue
```

### **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —á–∞—Ç–∞:**
```python
# –ü–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –≤ title
if "–≥—Ä—É–ø–ø–∞" in title or "group" in title or "—á–∞—Ç" in title:
    chat_type = "group"
elif "–∫–∞–Ω–∞–ª" in title or "channel" in title:
    chat_type = "channel"
```

---

## üéØ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê:**

‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –†–ï–ê–õ–¨–ù–´–ï —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —á–∞—Ç—ã
‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —á–∞—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Ä—Å–æ–Ω—ã
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ (–Ω–µ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–∞—Ç–∞–ª–æ–≥)
‚úÖ –ì—Ä—É–ø–ø—ã –î–õ–Ø –û–ë–©–ï–ù–ò–Ø, –Ω–µ —Ç–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª—ã
‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–µ —á–∞—Ç—ã –≥–æ—Ä–æ–¥–æ–≤
‚úÖ –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≥—Ä—É–ø–ø—ã –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º
‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ (DuckDuckGo –±–µ–∑ API key)

---

## üìù **TODO (—É–ª—É—á—à–µ–Ω–∏—è):**

1. ‚úÖ –ë–∞–∑–æ–≤—ã–π –≤–µ–±-–ø–æ–∏—Å–∫ - –°–î–ï–õ–ê–ù–û
2. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –ø–∞—É–∑—ã –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (anti-rate-limit)
3. ‚è≥ –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ (—á—Ç–æ–±—ã –Ω–µ –∏—Å–∫–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ)
4. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —á—Ç–æ —á–∞—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (—á–µ—Ä–µ–∑ Telegram API)
5. ‚è≥ –ü–∞—Ä—Å–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
6. ‚è≥ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Google (–µ—Å–ª–∏ DuckDuckGo –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)

---

## üß™ **–ö–ê–ö –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–¢–¨:**

```bash
# 1. –î–æ–±–∞–≤—å –∞–∫–∫–∞—É–Ω—Ç
curl -X POST http://localhost:8000/accounts/add \
  -H "Content-Type: application/json" \
  -d '{"session_id": "test_real_search"}'

# 2. –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ - —É–≤–∏–¥–∏—à—å –†–ï–ê–õ–¨–ù–´–ô –ø–æ–∏—Å–∫
tail -f logs/heat_up.log | grep "Searching:"

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# Searching: telegram –≥—Ä—É–ø–ø–∞ —á–∞—Ç –ú–æ—Å–∫–≤–∞
# Found 10 results for 'telegram –≥—Ä—É–ø–ø–∞ —á–∞—Ç –ú–æ—Å–∫–≤–∞'
# Extracted 5 Telegram links

# 3. –ü—Ä–æ–≤–µ—Ä—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —á–∞—Ç—ã
sqlite3 sessions.db \
"SELECT chat_username, chat_type, relevance_score, source_query 
 FROM discovered_chats 
 WHERE account_id=(SELECT id FROM accounts WHERE session_id='test_real_search')
 ORDER BY relevance_score DESC"
```

---

## üéâ **–ò–¢–û–ì:**

**–¢–µ–ø–µ—Ä—å SearchAgent –¥–µ–ª–∞–µ—Ç –ù–ê–°–¢–û–Ø–©–ò–ô –≤–µ–±-–ø–æ–∏—Å–∫!**
- ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —á–∞—Ç—ã —á–µ—Ä–µ–∑ DuckDuckGo
- ‚úÖ –ò–∑–≤–ª–µ–∫–∞–µ—Ç Telegram-—Å—Å—ã–ª–∫–∏
- ‚úÖ –†–∞–Ω–∂–∏—Ä—É–µ—Ç —Å –ø–æ–º–æ—â—å—é LLM
- ‚úÖ –ö–∞–∂–¥–æ–π –ø–µ—Ä—Å–æ–Ω–µ - —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —á–∞—Ç—ã!

**–ù–ï–¢ –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–ù–´–• –ö–ê–¢–ê–õ–û–ì–û–í!** üöÄ


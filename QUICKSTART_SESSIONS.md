# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ –ø—Ä–æ–≥—Ä–µ–≤ —Å–µ—Å—Å–∏–π

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)

```bash
cd /Users/knyaz/heat_up && source venv/bin/activate && uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

---

## ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π

### –û–¥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç (curl)

```bash
curl -X POST http://localhost:8000/accounts/add \
  -H "Content-Type: application/json" \
  -d '{
    "session_id": "session_001",
    "phone_number": "+79991234567",
    "country": "Russia",
    "daily_activity_count": 4
  }'
```

### –ú–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç)

```bash
./bulk_add_sessions.sh
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏:**
1. ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä—Å–æ–Ω–∞ (LLM)
2. ‚úÖ –ù–∞—Ö–æ–¥—è—Ç—Å—è 20 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ (SearchAgent)
3. ‚úÖ –ê–∫–∫–∞—É–Ω—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–≥—Ä–µ–≤—É

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–µ–≤–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å scheduler - –±—É–¥–µ—Ç –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –≤—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã N —Ä–∞–∑ –≤ –¥–µ–Ω—å
curl -X POST http://localhost:8000/scheduler/start

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
curl http://localhost:8000/scheduler/status
```

### –†—É—á–Ω–æ–π (—Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–≥—Ä–µ–≤)

```bash
# –ü—Ä–æ–≥—Ä–µ—Ç—å –∞–∫–∫–∞—É–Ω—Ç #1 –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å
curl -X POST http://localhost:8000/accounts/1/warmup-now \
  -H "Content-Type: application/json" \
  -d '{"action_count": 5}'
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
./check_accounts.sh
```

–ü–æ–∫–∞–∂–µ—Ç:
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ (ID, —Ç–µ–ª–µ—Ñ–æ–Ω, stage, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
- –û–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –°—Ç–∞—Ç—É—Å scheduler
- –ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–ø—É—Å–∫–∏

### –î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

```bash
curl http://localhost:8000/accounts/1
```

–ü–æ–∫–∞–∂–µ—Ç:
- –ü–µ—Ä—Å–æ–Ω—É (–∏–º—è, –≤–æ–∑—Ä–∞—Å—Ç, –ø—Ä–æ—Ñ–µ—Å—Å–∏—è, –∏–Ω—Ç–µ—Ä–µ—Å—ã)
- –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã (—Å –æ—Ü–µ–Ω–∫–∞–º–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏)
- –ò—Å—Ç–æ—Ä–∏—é –ø—Ä–æ–≥—Ä–µ–≤–∞

### –ó–¥–æ—Ä–æ–≤—å–µ –∞–∫–∫–∞—É–Ω—Ç–∞

```bash
curl http://localhost:8000/accounts/1/health
```

–ü–æ–∫–∞–∂–µ—Ç:
- Health score (0-1)
- –ü—Ä–æ–±–ª–µ–º—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

---

## üìù –õ–æ–≥–∏

### –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
tail -f logs/heat_up.log
```

### –§–∏–ª—å—Ç—Ä –ø–æ –Ω–æ–º–µ—Ä—É

```bash
grep "+79991234567" logs/heat_up.log
```

### –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏

```bash
grep "ERROR" logs/heat_up.log
```

---

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ò–∑–º–µ–Ω–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –ø—Ä–æ–≥—Ä–µ–≤–∞

```bash
curl -X PUT http://localhost:8000/accounts/1/update \
  -H "Content-Type: application/json" \
  -d '{"daily_activity_count": 6}'
```

### –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω—É

```bash
curl -X POST http://localhost:8000/accounts/1/generate-persona
```

### –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤

```bash
curl -X POST http://localhost:8000/accounts/1/refresh-chats
```

### –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç

```bash
curl -X DELETE http://localhost:8000/accounts/1/delete
```

### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å scheduler

```bash
curl -X POST http://localhost:8000/scheduler/stop
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```bash
curl http://localhost:8000/statistics
```

### –î–Ω–µ–≤–Ω–æ–π –æ—Ç—á–µ—Ç

```bash
curl http://localhost:8000/statistics/daily
```

### –£–¥–æ–±–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
./monitor.sh
```

---

## üóÇÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã

```bash
sqlite3 sessions.db "SELECT account_id, phone_number, stage, is_active FROM accounts;"
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä—Å–æ–Ω—ã

```bash
sqlite3 sessions.db "SELECT account_id, generated_name, occupation, city FROM personas;"
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é

```bash
sqlite3 sessions.db "SELECT * FROM warmup_sessions ORDER BY created_at DESC LIMIT 10;"
```

---

## ‚ö° –¢–∏–ø–∏—á–Ω—ã–π workflow

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
uvicorn main:app --port 8000 --reload

# 2. –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Å—Å–∏–∏ (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
./bulk_add_sessions.sh

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏—Å—å
./check_accounts.sh

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–≥—Ä–µ–≤
curl -X POST http://localhost:8000/scheduler/start

# 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å
./monitor.sh

# 6. –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
tail -f logs/heat_up.log
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **daily_activity_count**: 3-5 —Ä–∞–∑ –≤ –¥–µ–Ω—å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ
2. **–ù–µ –º–µ–Ω—è–π –ø–µ—Ä—Å–æ–Ω—É** –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ–≥—Ä–µ–≤–∞ (14 –¥–Ω–µ–π)
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å –ø–µ—Ä–≤—ã–µ 2-3 –¥–Ω—è** - —É–±–µ–¥–∏—Å—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫
4. **–ò—Å–ø–æ–ª—å–∑—É–π scheduler** - —Ä—É—á–Ω–æ–π –ø—Ä–æ–≥—Ä–µ–≤ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
5. **–ü—Ä–æ–≤–µ—Ä—è–π health** —Ä–∞–∑ –≤ –¥–µ–Ω—å –ø–µ—Ä–≤—É—é –Ω–µ–¥–µ–ª—é

---

## üÜò Troubleshooting

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω
lsof -i :8000

# –ï—Å–ª–∏ –∑–∞–Ω—è—Ç - —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
kill -9 <PID>
```

### Scheduler –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
curl http://localhost:8000/scheduler/status

# –ï—Å–ª–∏ stopped - –∑–∞–ø—É—Å—Ç–∏—Ç—å
curl -X POST http://localhost:8000/scheduler/start
```

### –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏
grep "ERROR" logs/heat_up.log | tail -20

# –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:
# - "Session not found" ‚Üí –ø—Ä–æ–≤–µ—Ä—å session_id
# - "OpenAI API error" ‚Üí –ø—Ä–æ–≤–µ—Ä—å OPENAI_API_KEY –≤ .env
# - "Telegram API error" ‚Üí –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ Telegram API —Ä–∞–±–æ—Ç–∞–µ—Ç
```

### LLM –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω—É

```bash
# –ü—Ä–æ–≤–µ—Ä—å API key
grep OPENAI_API_KEY .env

# –ü—Ä–æ–≤–µ—Ä—å –±–∞–ª–∞–Ω—Å OpenAI
# https://platform.openai.com/usage
```

---

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `HOWTO_ADD_SESSIONS.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `WARMUP_SYSTEM_GUIDE.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- `SEARCH_AGENT_README.md` - –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–∏—Å–∫ –∫–∞–Ω–∞–ª–æ–≤
- `API_EXAMPLES.sh` - –ø—Ä–∏–º–µ—Ä—ã –≤—Å–µ—Ö API –≤—ã–∑–æ–≤–æ–≤

---

**–í—Å–µ –≥–æ—Ç–æ–≤–æ! –î–æ–±–∞–≤–ª—è–π —Å–µ—Å—Å–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞–π –ø—Ä–æ–≥—Ä–µ–≤! üî•**


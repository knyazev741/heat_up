# SearchAgent - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∏ –†–µ—à–µ–Ω–∏–µ –ü—Ä–æ–±–ª–µ–º—ã

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–∏—Å–∫ –∫–∞–Ω–∞–ª–æ–≤ –∏–∑–≤–ª–µ–∫–∞–ª **–º—É—Å–æ—Ä** (email, Instagram, —Å–æ—Ü—Å–µ—Ç–∏) –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö Telegram –∫–∞–Ω–∞–ª–æ–≤.

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ ‚úÖ

### 1. –£–ª—É—á—à–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ `search_agent.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –†–∞—Å—à–∏—Ä–µ–Ω —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ (email-—Å–µ—Ä–≤–∏—Å—ã, —Å–æ—Ü—Å–µ—Ç–∏, –±—Ä–µ–Ω–¥—ã)
- `@—É–ø–æ–º–∏–Ω–∞–Ω–∏—è` –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ** –µ—Å–ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç Telegram
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–¥–∞–µ—Ç—Å—è –ø—Ä—è–º—ã–º `t.me/` —Å—Å—ã–ª–∫–∞–º
- –§–∏–ª—å—Ç—Ä—É—é—Ç—Å—è username —Å —Ç–æ—á–∫–∞–º–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è–º–∏, –¥–ª–∏–Ω–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏

**–§–∞–π–ª:** `search_agent.py`, —Å—Ç—Ä–æ–∫–∏ 123-189

```python
# –ü–†–ò–û–†–ò–¢–ï–¢ 1: t.me/xxx (–≤—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å)
# –ü–†–ò–û–†–ò–¢–ï–¢ 2: @xxx —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –¢–û–õ–¨–ö–û –≤ Telegram-–∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
```

### 2. –û—á–∏—â–µ–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- –£–¥–∞–ª–µ–Ω–æ **162 –ª–æ–∂–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞** (Instagram, email, —Å–æ—Ü—Å–µ—Ç–∏)
- –û—Å—Ç–∞–ª–æ—Å—å **265 —Ä–µ–∞–ª—å–Ω—ã—Ö Telegram –∫–∞–Ω–∞–ª–æ–≤**

### 3. –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ API endpoints

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –∫–∞–Ω–∞–ª—ã –¥–ª—è –æ–¥–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
POST /accounts/{account_id}/refresh-channels

# –û–±–Ω–æ–≤–∏—Ç—å –∫–∞–Ω–∞–ª—ã –¥–ª—è –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å < 5 –∫–∞–Ω–∞–ª–∞–º–∏  
POST /refresh-all-low-channel-accounts
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç SearchAgent üîç

### –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è (search_agent.py)

**–ù–ï –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∞–π—Ç—ã** - —Ç–æ–ª—å–∫–æ –ø–∞—Ä—Å–∏—Ç snippets –æ—Ç DuckDuckGo:

```
1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–≥–æ—Ä–æ–¥ + –∏–Ω—Ç–µ—Ä–µ—Å—ã)
2. –ò—â–µ—Ç –≤ DuckDuckGo API
3. –ü–æ–ª—É—á–∞–µ—Ç: URL, title, body snippet
4. –ü–∞—Ä—Å–∏—Ç t.me/ —Å—Å—ã–ª–∫–∏ –∏ @—É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏–∑ snippets
5. LLM —Ä–∞–Ω–∂–∏—Ä—É–µ—Ç –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ DuckDuckGo –≤–∫–ª—é—á–∏–ª –≤ snippet.

### –£–ª—É—á—à–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ (—Å web scraping)

#### SearchAgentV2 (search_agent_v2.py)
**–° –ø–µ—Ä–µ—Ö–æ–¥–æ–º –Ω–∞ —Å–∞–π—Ç—ã:**

```
1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
2. –ò—â–µ—Ç –≤ DuckDuckGo (–ø–æ–ª—É—á–∞–µ—Ç URLs)
3. –ó–ê–•–û–î–ò–¢ –ù–ê –°–ê–ô–¢–´ (HTTP GET + BeautifulSoup)
4. –ü–∞—Ä—Å–∏—Ç HTML –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç t.me/ —Å—Å—ã–ª–∫–∏
5. LLM —Ä–∞–Ω–∂–∏—Ä—É–µ—Ç
```

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- `httpx` - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π HTTP –∫–ª–∏–µ–Ω—Ç
- `BeautifulSoup4` - –ø–∞—Ä—Å–∏–Ω–≥ HTML
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–æ–º–µ–Ω—É (–Ω–µ –∑–∞—Ö–æ–¥–∏–º –Ω–∞ Instagram/Facebook)

#### SearchAgentV3 (search_agent_v3.py)
**–°–∫—Ä–µ–π–ø–∏—Ç –∫–∞—Ç–∞–ª–æ–≥–∏ –Ω–∞–ø—Ä—è–º—É—é:**

```
1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç URLs –∫–∞—Ç–∞–ª–æ–≥–æ–≤ (tlgrm.ru, tgstat.ru)
2. –°–∫—Ä–µ–π–ø–∏—Ç –∫–∞—Ç–∞–ª–æ–≥–∏ –Ω–∞–ø—Ä—è–º—É—é
3. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–∞–Ω–∞–ª—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–æ–≤
4. LLM —Ä–∞–Ω–∂–∏—Ä—É–µ—Ç
```

## –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ‚ö†Ô∏è

**DuckDuckGo –±–ª–æ–∫–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã** - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `duckduckgo_search` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤).

**–ö–∞—Ç–∞–ª–æ–≥–∏ –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –±–æ—Ç–æ–≤** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π scraping (JavaScript, Cloudflare bypass).

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ üí°

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π SearchAgent –∫–∞–∫ –µ—Å—Ç—å

–°—Ç–∞—Ä—ã–π –∫–æ–¥ **–£–ñ–ï –†–ê–ë–û–¢–ê–ï–¢** –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (–Ω–∞—Ö–æ–¥–∏–ª 20+ –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞). –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –æ–Ω –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–∞–Ω–∞–ª—ã.

**–î–µ–π—Å—Ç–≤–∏–µ:** –ù–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è—Ç—å, –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π —É–ª—É—á—à–µ–Ω–Ω—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–ª–∞—Ç–Ω—ã–µ API

**Google Custom Search API:**
- 100 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- $5 –∑–∞ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ—Å–ª–µ
- –°—Ç–∞–±–∏–ª—å–Ω–æ, –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

**Bing Search API:**
- 1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü –±–µ—Å–ø–ª–∞—Ç–Ω–æ  
- $7 –∑–∞ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ—Å–ª–µ

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ì–æ—Ç–æ–≤—ã–µ –±–∞–∑—ã –∫–∞–Ω–∞–ª–æ–≤

**TGStat API:**
- https://api.tgstat.ru/
- –ü–ª–∞—Ç–Ω—ã–π ($50-200/–º–µ—Å—è—Ü)
- –û–≥—Ä–æ–º–Ω–∞—è –±–∞–∑–∞ + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**Telegram-–∫–∞—Ç–∞–ª–æ–≥–∏ (—Ä—É—á–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥):**
- –°–∫—Ä–µ–π–ø–∏–º —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é –≤—Ä—É—á–Ω—É—é
- –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è –ø–æ–∏—Å–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 4: Headless browser (—Å–ª–æ–∂–Ω–æ)

**Playwright/Selenium:**
- –≠–º—É–ª–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä
- –û–±—Ö–æ–¥–∏—Ç –∑–∞—â–∏—Ç—É –æ—Ç –±–æ—Ç–æ–≤
- –ú–µ–¥–ª–µ–Ω–Ω–æ (2-5 —Å–µ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
- –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤

## –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã üß™

### test_search_agent.py
–î–µ—Ç–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ SearchAgent:
```bash
python3 test_search_agent.py 59
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã DuckDuckGo
- –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
- LLM —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ

### test_search_v2.py
–¢–µ—Å—Ç SearchAgentV2 (—Å web scraping):
```bash
python3 test_search_v2.py 59
```

### test_search_v3.py
–¢–µ—Å—Ç SearchAgentV3 (–∫–∞—Ç–∞–ª–æ–≥–∏):
```bash
python3 test_search_v3.py 59
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–µ

### –û–±–Ω–æ–≤–∏—Ç—å –∫–∞–Ω–∞–ª—ã –≤—Ä—É—á–Ω—É—é

```bash
# –î–ª—è –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å < 5 –∫–∞–Ω–∞–ª–∞–º–∏
curl -X POST http://localhost:8080/refresh-all-low-channel-accounts

# –î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
curl -X POST http://localhost:8080/accounts/59/refresh-channels
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:
```bash
tail -f logs/heat_up.log | grep "üîç"
```

## –í—ã–≤–æ–¥—ã

1. ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞** - –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –º—É—Å–æ—Ä–∞
2. ‚úÖ **–ë–∞–∑–∞ –æ—á–∏—â–µ–Ω–∞** - —É–¥–∞–ª–µ–Ω—ã –ª–æ–∂–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
3. ‚úÖ **API –¥–æ–±–∞–≤–ª–µ–Ω—ã** - –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–∞–Ω–∞–ª—ã –≤—Ä—É—á–Ω—É—é
4. ‚ö†Ô∏è **Web scraping —Å–ª–æ–∂–µ–Ω** - DuckDuckGo/–∫–∞—Ç–∞–ª–æ–≥–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –±–æ—Ç–æ–≤
5. üí° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π SearchAgent + –ø–ª–∞—Ç–Ω—ã–π API –∏–ª–∏ —Ä—É—á–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π** –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–∞—Ö: `POST /refresh-all-low-channel-accounts`
2. **–ú–æ–Ω–∏—Ç–æ—Ä—å** –ª–æ–≥–∏ - –∫–∞–∫–∏–µ –∫–∞–Ω–∞–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è
3. **–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–π –ø–ª–∞—Ç–Ω—ã–π API (Google/Bing)
4. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞** - —Å–æ–∑–¥–∞–π —Ä—É—á–Ω–æ–π –∫–∞—Ç–∞–ª–æ–≥ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –≥–æ—Ä–æ–¥–æ–≤





